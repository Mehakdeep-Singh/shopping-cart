(this["webpackJsonpreact-shopping-cart"]=this["webpackJsonpreact-shopping-cart"]||[]).push([[0],{26:function(e){e.exports=JSON.parse('{"products":[{"id":"1","title":"Dress 1 titleeeee","description":"des Dress 1 titleeeee","price":12,"availableSizes":["XL","XXL","M"],"image":"/images/kanikaMann.jpg"},{"id":"3","title":"Dress 1 titleeeee","description":"des Dress 1 titleeeee","price":13,"availableSizes":["XL","XXL","S"],"image":"/images/kanikaMann.jpg"},{"id":"4","title":"Dress 1 titleeeee","description":"des Dress 1 titleeeee","price":16,"availableSizes":["XL","XXL","S"],"image":"/images/kanikaMann.jpg"},{"id":"43","title":"Dress 1 titleeeee","description":"des Dress 1 titleeeee","price":29,"availableSizes":["XL","XXL","XS"],"image":"/images/kanikaMann.jpg"},{"id":"42","title":"Dress 1 titleeeee","description":"des Dress 1 titleeeee","price":91,"availableSizes":["XL","XXL","L"],"image":"/images/kanikaMann.jpg"},{"id":"88","title":"Dress 1 titleeeee","description":"des Dress 1 titleeeee","price":33,"availableSizes":["XL","XXL","M"],"image":"/images/kanikaMann.jpg"}]}')},3:function(e,t,c){"use strict";c.r(t),c.d(t,"FETCH_PRODUCTS",(function(){return r})),c.d(t,"FILTER_PRODUCTS_BY_SIZE",(function(){return s})),c.d(t,"ORDER_PRODUCTS_BY_PRICE",(function(){return i})),c.d(t,"ADD_TO_CART",(function(){return n})),c.d(t,"REMOVE_FROM_CART",(function(){return a})),c.d(t,"CREATE_ORDER",(function(){return l})),c.d(t,"CLEAR_ORDER",(function(){return d})),c.d(t,"CLEAR_CART",(function(){return o}));var r="FETCH_PRODUCTS",s="FILTER_PRODUCTS_BY_SIZE",i="ORDER_PRODUCTS_BY_PRICE ",n="ADD_TO_CART ",a="REMOVE_FROM_CART ",l="CREATE_ORDER",d="CLEAR_ORDER",o="CREATE_CART"},32:function(e,t,c){},50:function(e,t,c){"use strict";c.r(t);var r=c(1),s=c.n(r),i=c(8),n=c.n(i),a=(c(32),c(2)),l=c(5),d=c(4),o=c(10),j=function(e){return"$"+Number(e.toFixed(1)).toLocaleString()+" "},u=c(9),O=c.n(u),b=c(3),h=c(11),m=c.n(h),p=c(12),x=c.n(p),f=c(0),v=Object(d.b)((function(e){return{cartItems:e.cart.cartItems,order:e.order.order}}),{removeFromCart:function(e,t){return function(c){var r=e.slice().filter((function(e){return e._id!==t._id}));c({type:b.REMOVE_FROM_CART,payload:{cartItems:r}}),localStorage.setItem("cartItems",JSON.stringify(r))}},createOrder:function(e){return function(t){fetch("/api/orders",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return console.log(e),e.json()})).then((function(e){t({type:b.CREATE_ORDER,payload:e}),localStorage.clear("cartItems"),t({type:b.CLEAR_CART})}))}},clearOrder:function(){return function(e){e({type:b.CLEAR_ORDER})}}})((function(e){var t=e.cartItems,c=e.order,s=Object(r.useState)({name:"",email:"",address:"",showCheckOut:!1}),i=Object(l.a)(s,2),n=i[0],d=i[1],u=function(e){d(Object(a.a)(Object(a.a)({},n),{},Object(o.a)({},e.target.name,e.target.value)))},b=function(){e.clearOrder()};return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsxs)("div",{children:[0===t.length?Object(f.jsx)("div",{className:"cart cart-header",children:"Cart is Empty"}):Object(f.jsxs)("div",{className:"cart cart-header",children:["You have ",t.length," in the cart"]}),c&&Object(f.jsx)(m.a,{isOpen:!0,onRequestClose:b,children:Object(f.jsxs)(x.a,{children:[Object(f.jsx)("button",{className:"close-modal",onClick:b,children:"x"}),Object(f.jsxs)("div",{className:"order-details",children:[Object(f.jsx)("h3",{className:"success-message",children:"Order has been placed"}),Object(f.jsxs)("h2",{children:["Order No. ",c._id," "]}),Object(f.jsxs)("ul",{children:[Object(f.jsxs)("li",{children:[Object(f.jsx)("div",{children:"Name:"}),Object(f.jsxs)("div",{children:[" ",c.name,"  "]})]}),Object(f.jsxs)("li",{children:[Object(f.jsx)("div",{children:"Email:"}),Object(f.jsxs)("div",{children:[" ",c.email,"  "]})]}),Object(f.jsxs)("li",{children:[Object(f.jsx)("div",{children:"Address:"}),Object(f.jsxs)("div",{children:[" ",c.address,"  "]})]}),Object(f.jsxs)("li",{children:[Object(f.jsx)("div",{children:"Address:"}),Object(f.jsxs)("div",{children:[" ",j(c.total),"  "]})]}),Object(f.jsxs)("li",{children:[Object(f.jsx)("div",{children:"Cart Items"}),Object(f.jsxs)("div",{children:[" ",c.cartItems.map((function(e){return Object(f.jsxs)("div",{children:[" ",e.count," ","X"," ",e.title," "]})})),"  "]})]})]})]})]})})]}),Object(f.jsxs)("div",{children:[Object(f.jsx)("div",{className:"cart",children:Object(f.jsx)(O.a,{left:!0,cascade:!0,children:Object(f.jsx)("ul",{className:"cart-items",children:t.map((function(c){return Object(f.jsxs)("li",{children:[Object(f.jsx)("div",{children:Object(f.jsx)("img",{src:c.image,alt:t.title})}),Object(f.jsxs)("div",{children:[Object(f.jsx)("div",{children:c.title}),Object(f.jsxs)("div",{className:"right",children:[j(c.price)," x ",c.count," "," "]}),Object(f.jsx)("button",{onClick:function(){return e.removeFromCart(e.cartItems,c)},children:"Remove"})]})]},c.id)}))})})}),0!==t.length&&Object(f.jsxs)("div",{children:[Object(f.jsx)("div",{className:"cart",children:Object(f.jsxs)("div",{className:"total",children:[Object(f.jsx)("div",{children:j(t.reduce((function(e,t){return e+t.price*t.count}),0))}),Object(f.jsx)("button",{className:"primary button",onClick:function(){return d({showCheckOut:!0})},children:"Proceed"})]})}),n.showCheckOut&&Object(f.jsx)("div",{className:"cart",children:Object(f.jsx)(O.a,{right:!0,cascade:!0,children:Object(f.jsx)("form",{onSubmit:function(c){c.preventDefault();var r={name:n.name,email:n.email,address:n.address,cartItems:t,total:t.reduce((function(e,t){return e+t.price*t.count}),0)};e.createOrder(r)},children:Object(f.jsxs)("ul",{className:"form-container",children:[Object(f.jsxs)("li",{children:[Object(f.jsx)("label",{children:"Email"}),Object(f.jsx)("input",{name:"email",type:"email",required:!0,onChange:u})]}),Object(f.jsxs)("li",{children:[Object(f.jsx)("label",{children:"Name"}),Object(f.jsx)("input",{name:"name",type:"text",required:!0,onChange:u})]}),Object(f.jsxs)("li",{children:[Object(f.jsx)("label",{children:"Address"}),Object(f.jsx)("input",{name:"address",type:"text",required:!0,onChange:u})]}),Object(f.jsx)("li",{children:Object(f.jsx)("button",{className:"button primary",type:"submit",children:"Checkout"})})]})})})})]})]})]})})),R=c(19),g=c.n(R),_=c(25),C=Object(d.b)((function(e){return console.log("state in filter",e),{size:e.products.size,sort:e.products.sort,products:e.products.items,filteredProducts:e.products.filteredItems}}),{filterProducts:function(e,t){return function(c){c({type:b.FILTER_PRODUCTS_BY_SIZE,payload:{size:t,items:""===t?e:e.filter((function(e){return e.availableSizes.indexOf(t)>=0}))}})}},sortProducts:function(e,t){return function(c){var r=e.slice();"latest"===t?r.sort((function(e,t){return e._id>t._id?1:-1})):r.sort((function(e,c){return"lowest"===t?e.price>c.price?1:-1:e.price>c.price?-1:1})),c({type:b.ORDER_PRODUCTS_BY_PRICE,payload:{sort:t,items:r}})}}})((function(e){return Object(f.jsxs)("div",{className:"filter",children:[Object(f.jsxs)("div",{className:"filter-result",children:[e.count," ","Products"]}),Object(f.jsxs)("div",{className:"filter-sort",children:["Order",Object(f.jsxs)("select",{value:e.sort,onChange:function(t){e.sortProducts(e.filteredProducts,t.target.value)},children:[Object(f.jsx)("option",{value:"latest",children:"Latest"}),Object(f.jsx)("option",{value:"lowest",children:"Lowest"}),Object(f.jsx)("option",{value:"highest",children:"highest"})]})]}),Object(f.jsxs)("div",{className:"filter-size",children:["Filter",Object(f.jsxs)("select",{value:e.size,onChange:function(t){return e.filterProducts(e.filteredProducts,t.target.value)},children:[Object(f.jsx)("option",{value:"",children:"ALL"}),Object(f.jsx)("option",{value:"XS",children:"XS"}),Object(f.jsx)("option",{value:"S",children:"S"}),Object(f.jsx)("option",{value:"M",children:"M"}),Object(f.jsx)("option",{value:"L",children:"L"}),Object(f.jsx)("option",{value:"XL",children:"XL"}),Object(f.jsx)("option",{value:"XXL",children:"XXL"})]})]})]})}));var E=Object(d.b)((function(e){return{products:e.products.filteredItems,cartItems:e.cart.cartItems}}),{fetchProducts:function(){return function(){var e=Object(_.a)(g.a.mark((function e(t){var c,r;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/products");case 2:return c=e.sent,e.next=5,c.json();case 5:r=e.sent,t({type:b.FETCH_PRODUCTS,payload:r});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},addToCart:function(e,t){return function(c){var r=e.slice(),s=!1;r.forEach((function(e){e._id===t._id&&(s=!0,e.count++)})),s||r.push(Object(a.a)(Object(a.a)({},t),{},{count:1})),c({type:b.ADD_TO_CART,payload:{cartItems:r}}),localStorage.setItem("cartItems",JSON.stringify(r))}}})((function(e){var t=Object(r.useState)(null),c=Object(l.a)(t,2),s=c[0],i=c[1];Object(r.useEffect)((function(){e.fetchProducts()}),[]);var n=function(){i(null)};return Object(f.jsxs)("div",{children:[Object(f.jsx)(O.a,{bottom:!0,cascade:!0,children:e.products?Object(f.jsx)("ul",{className:"products",children:e.products.map((function(t){return Object(f.jsx)("li",{children:Object(f.jsxs)("div",{className:"product",children:[Object(f.jsxs)("a",{href:"#"+t._id,onClick:function(){return function(e){i(e)}(t)},children:[Object(f.jsx)("img",{src:t.image,alt:t.title}),Object(f.jsx)("p",{children:t.title})]}),Object(f.jsxs)("div",{className:"product-price",children:[Object(f.jsx)("div",{children:j(t.price)}),Object(f.jsx)("button",{onClick:function(){return e.addToCart(e.cartItems,t)},className:"button primary",children:"Add to cart"})]})]})},t._id)}))}):Object(f.jsx)("div",{children:"...loading"})}),s&&Object(f.jsx)(m.a,{isOpen:!0,onRequestClose:n,children:Object(f.jsxs)(x.a,{children:[Object(f.jsx)("div",{children:"Modal"}),Object(f.jsx)("button",{onClick:n,className:"close-modal",children:"X"}),Object(f.jsxs)("div",{className:"product-details",children:[Object(f.jsx)("img",{src:s.image,alt:s.title}),Object(f.jsxs)("div",{className:"product-details-description",children:[Object(f.jsx)("p",{children:Object(f.jsx)("strong",{children:s.title})}),Object(f.jsx)("p",{children:s.description}),Object(f.jsxs)("p",{children:["Available Sizes "," ",s.availableSizes.map((function(e){return Object(f.jsxs)("span",{children:[" ",Object(f.jsx)("button",{className:"button ",children:e})]})}))]}),Object(f.jsxs)("div",{className:"product-price",children:[Object(f.jsx)("div",{children:j(s.price)}),Object(f.jsx)("button",{className:"button primary",onClick:function(){e.addToCart(s),n()},children:"Add to Cart"})]})]})]})]})})]})})),S=c(26),I=c(6),T=c(27),D=c(3),N=D.CREATE_ORDER,y=D.CLEAR_ORDER,L=c(3),A=L.FETCH_PRODUCTS,X=L.FILTER_PRODUCTS_BY_SIZE,P=L.ORDER_PRODUCTS_BY_PRICE,k=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||I.d,M=Object(I.e)(Object(I.c)({products:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(console.log("in reducerrrrrrrrrrr"),t.type){case X:return Object(a.a)(Object(a.a)({},e),{},{filteredItems:t.payload.items,size:t.payload.size});case P:return Object(a.a)(Object(a.a)({},e),{},{sort:t.payload.sort,filteredItems:t.payload.items});case A:return{items:t.payload,filteredItems:t.payload};default:return e}},cart:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{cartItems:JSON.parse(localStorage.getItem("cartItems")||"[]")},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case b.ADD_TO_CART:case b.REMOVE_FROM_CART:return{cartItems:t.payload.cartItems};default:return e}},order:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case N:return{order:t.payload};case y:return{order:null};default:return e}}}),{},k(Object(I.a)(T.a)));var z=function(){var e=function(e){var t=Object(r.useState)(e),c=Object(l.a)(t,2),s=c[0],i=c[1],n=Object(r.useRef)(null),a=function(e,t){n.current=t,i(e)};return Object(r.useEffect)((function(){n.current&&n.current(s)}),[s]),[s,a]}({products:S.products,cartItems:localStorage.getItem("cartItems")?JSON.parse(localStorage.getItem("cartItems")):[],size:"",sort:""}),t=Object(l.a)(e,2),c=t[0],s=t[1];return Object(f.jsx)(d.a,{store:M,children:Object(f.jsxs)("div",{className:"grid-container",children:[Object(f.jsx)("header",{className:"",children:Object(f.jsx)("a",{href:"/",children:"React Shopping Cart"})}),Object(f.jsx)("main",{children:Object(f.jsxs)("div",{className:"content",children:[Object(f.jsxs)("div",{className:"main",children:[Object(f.jsx)(C,{}),Object(f.jsx)(E,{addToCart:function(e){!function(e){var t=c.cartItems.slice(),r=!1;t.forEach((function(t){t._id===e._id&&(t.count++,r=!0)})),r||t.push(Object(a.a)(Object(a.a)({},e),{},{count:1})),s(Object(a.a)(Object(a.a)({},c),{},{cartItems:t})),localStorage.setItem("cartItems",JSON.stringify(t))}(e)}})]}),Object(f.jsx)("div",{className:"sidebar",children:Object(f.jsx)(v,{})})]})}),Object(f.jsx)("footer",{children:"All right is reserved"})]})})};n.a.render(Object(f.jsx)(s.a.StrictMode,{children:Object(f.jsx)(z,{})}),document.getElementById("root"))}},[[50,1,2]]]);
//# sourceMappingURL=main.86870f1a.chunk.js.map